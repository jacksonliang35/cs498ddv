<!DOCTYPE html>
<style>
.axis .domain {
  display: none;
}
</style>
<script src="https://d3js.org/d3.v4.min.js"></script>
<html><body>
<h2>Hello World!</h2>
<svg id="viz" width="1000" height="500" class="chart"></svg>
<script>

var svg = d3.select("#viz"),
    margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom,
    xScale = d3.scaleLinear().range([margin.left, width - margin.right]).domain([1982,2014]),
    yScale = d3.scaleLinear().range([height - margin.top, margin.bottom]).domain([0,90]),
    xAxis = d3.svg.axis().scale(xScale),
    yAxis = d3.svg.axis().scale(yScale);
    vis.append("svg:g").call(xAxis);
// var g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");



d3.csv("https://raw.githubusercontent.com/jacksonliang35/cs498ddv/master/data/cs498ddv_data.csv", function(d, i, columns) {
  for (var i = 2; i < columns.length; ++i) d[columns[i]] = +d[columns[i]];
  // d.total = t;
  return d;
}, function(error, data) {
  if (error) throw error;
  var vizdata = [];
  // Reconstruct data
  var columns = Object.keys(data[0]);
  for (var i = 0; i < data.length; i++){
    var temp = [];
    for (var j = 0; j < columns.length; j++){
      var col = columns[j];
      if(col != "UrbanArea" && col != "PopulationGroup")
        temp.push({"UrbanArea": data[i].UrbanArea,
                   "PopulationGroup": data[i].PopulationGroup,
                   [col]: data[i][col]});
    }
    vizdata.push(temp);
  }

  console.log(vizdata[0]);
});

</script>
</body></html>
